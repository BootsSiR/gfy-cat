<div hidden><style shim-shadowdom="">html /deep/ [layout][horizontal],html /deep/ [layout][vertical]{display:-ms-flexbox;display:-webkit-flex;display:flex}html /deep/ [layout][horizontal][inline],html /deep/ [layout][vertical][inline]{display:-ms-inline-flexbox;display:-webkit-inline-flex;display:inline-flex}html /deep/ [layout][horizontal]{-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}html /deep/ [layout][horizontal][reverse]{-ms-flex-direction:row-reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse}html /deep/ [layout][vertical]{-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column}html /deep/ [layout][vertical][reverse]{-ms-flex-direction:column-reverse;-webkit-flex-direction:column-reverse;flex-direction:column-reverse}html /deep/ [layout][wrap]{-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap}html /deep/ [layout][wrap-reverse]{-ms-flex-wrap:wrap-reverse;-webkit-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse}html /deep/ [flex]{-ms-flex:1 1 0;-webkit-flex:1;flex:1;-webkit-flex-basis:0;flex-basis:0}html /deep/ [vertical][layout]>[flex][auto-vertical],html /deep/ [vertical][layout]::shadow [flex][auto-vertical]{-ms-flex:1 1 auto;-webkit-flex-basis:auto;flex-basis:auto}html /deep/ [flex][auto]{-ms-flex:1 1 auto;-webkit-flex-basis:auto;flex-basis:auto}html /deep/ [flex][none]{-ms-flex:none;-webkit-flex:none;flex:none}html /deep/ [flex][one]{-ms-flex:1;-webkit-flex:1;flex:1}html /deep/ [flex][two]{-ms-flex:2;-webkit-flex:2;flex:2}html /deep/ [flex][three]{-ms-flex:3;-webkit-flex:3;flex:3}html /deep/ [flex][four]{-ms-flex:4;-webkit-flex:4;flex:4}html /deep/ [flex][five]{-ms-flex:5;-webkit-flex:5;flex:5}html /deep/ [flex][six]{-ms-flex:6;-webkit-flex:6;flex:6}html /deep/ [flex][seven]{-ms-flex:7;-webkit-flex:7;flex:7}html /deep/ [flex][eight]{-ms-flex:8;-webkit-flex:8;flex:8}html /deep/ [flex][nine]{-ms-flex:9;-webkit-flex:9;flex:9}html /deep/ [flex][ten]{-ms-flex:10;-webkit-flex:10;flex:10}html /deep/ [flex][eleven]{-ms-flex:11;-webkit-flex:11;flex:11}html /deep/ [flex][twelve]{-ms-flex:12;-webkit-flex:12;flex:12}html /deep/ [layout][start]{-ms-flex-align:start;-webkit-align-items:flex-start;align-items:flex-start}html /deep/ [layout][center],html /deep/ [layout][center-center]{-ms-flex-align:center;-webkit-align-items:center;align-items:center}html /deep/ [layout][end]{-ms-flex-align:end;-webkit-align-items:flex-end;align-items:flex-end}html /deep/ [layout][start-justified]{-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}html /deep/ [layout][center-justified],html /deep/ [layout][center-center]{-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center}html /deep/ [layout][end-justified]{-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}html /deep/ [layout][around-justified]{-ms-flex-pack:distribute;-webkit-justify-content:space-around;justify-content:space-around}html /deep/ [layout][justified]{-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}html /deep/ [self-start]{-ms-align-self:flex-start;-webkit-align-self:flex-start;align-self:flex-start}html /deep/ [self-center]{-ms-align-self:center;-webkit-align-self:center;align-self:center}html /deep/ [self-end]{-ms-align-self:flex-end;-webkit-align-self:flex-end;align-self:flex-end}html /deep/ [self-stretch]{-ms-align-self:stretch;-webkit-align-self:stretch;align-self:stretch}html /deep/ [block]{display:block}html /deep/ [hidden]{display:none!important}html /deep/ [relative]{position:relative}html /deep/ [fit]{position:absolute;top:0;right:0;bottom:0;left:0}body[fullbleed]{margin:0;height:100vh}html /deep/ [segment],html /deep/ segment{display:block;position:relative;-webkit-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;margin:1em .5em;padding:1em;background-color:#fff;-webkit-box-shadow:0 0 0 1px rgba(0,0,0,.1);box-shadow:0 0 0 1px rgba(0,0,0,.1);border-radius:5px 5px 5px 5px}</style><script src="../bower_components/polymer/polymer.js"></script></div>
<div hidden><polymer-element name="core-xhr" hidden assetpath="../bower_components/core-ajax/"><script>Polymer("core-xhr",{request:function(options){var xhr=new XMLHttpRequest;var url=options.url;var method=options.method||"GET";var async=!options.sync;var params=this.toQueryString(options.params);if(params&&method=="GET"){url+=(url.indexOf("?")>0?"&":"?")+params}var xhrParams=this.isBodyMethod(method)?options.body||params:null;xhr.open(method,url,async);if(options.responseType){xhr.responseType=options.responseType}if(options.withCredentials){xhr.withCredentials=true}this.makeReadyStateHandler(xhr,options.callback);this.setRequestHeaders(xhr,options.headers);xhr.send(xhrParams);if(!async){xhr.onreadystatechange(xhr)}return xhr},toQueryString:function(params){var r=[];for(var n in params){var v=params[n];n=encodeURIComponent(n);r.push(v==null?n:n+"="+encodeURIComponent(v))}return r.join("&")},isBodyMethod:function(method){return this.bodyMethods[(method||"").toUpperCase()]},bodyMethods:{POST:1,PUT:1,DELETE:1},makeReadyStateHandler:function(xhr,callback){xhr.onreadystatechange=function(){if(xhr.readyState==4){callback&&callback.call(null,xhr.response,xhr)}}},setRequestHeaders:function(xhr,headers){if(headers){for(var name in headers){xhr.setRequestHeader(name,headers[name])}}}});</script></polymer-element><polymer-element name="core-ajax" hidden attributes="url handleAs auto params response error method headers body contentType withCredentials" assetpath="../bower_components/core-ajax/"><script>Polymer("core-ajax",{url:"",handleAs:"",auto:false,params:"",response:null,error:null,method:"",headers:null,body:null,contentType:"application/x-www-form-urlencoded",withCredentials:false,xhrArgs:null,ready:function(){this.xhr=document.createElement("core-xhr")},receive:function(response,xhr){if(this.isSuccess(xhr)){this.processResponse(xhr)}else{this.processError(xhr)}this.complete(xhr)},isSuccess:function(xhr){var status=xhr.status||0;return!status||status>=200&&status<300},processResponse:function(xhr){var response=this.evalResponse(xhr);if(xhr===this.activeRequest){this.response=response}this.fire("core-response",{response:response,xhr:xhr})},processError:function(xhr){var response=xhr.status+": "+xhr.responseText;if(xhr===this.activeRequest){this.error=response}this.fire("core-error",{response:response,xhr:xhr})},complete:function(xhr){this.fire("core-complete",{response:xhr.status,xhr:xhr})},evalResponse:function(xhr){return this[(this.handleAs||"text")+"Handler"](xhr)},xmlHandler:function(xhr){return xhr.responseXML},textHandler:function(xhr){return xhr.responseText},jsonHandler:function(xhr){var r=xhr.responseText;try{return JSON.parse(r)}catch(x){console.warn("core-ajax caught an exception trying to parse response as JSON:");console.warn("url:",this.url);console.warn(x);return r}},documentHandler:function(xhr){return xhr.response},blobHandler:function(xhr){return xhr.response},arraybufferHandler:function(xhr){return xhr.response},urlChanged:function(){if(!this.handleAs){var ext=String(this.url).split(".").pop();switch(ext){case"json":this.handleAs="json";break}}this.autoGo()},paramsChanged:function(){this.autoGo()},autoChanged:function(){this.autoGo()},autoGo:function(){if(this.auto){this.goJob=this.job(this.goJob,this.go,0)}},go:function(){var args=this.xhrArgs||{};args.body=this.body||args.body;args.params=this.params||args.params;if(args.params&&typeof args.params=="string"){args.params=JSON.parse(args.params)}args.headers=this.headers||args.headers||{};if(args.headers&&typeof args.headers=="string"){args.headers=JSON.parse(args.headers)}var hasContentType=Object.keys(args.headers).some(function(header){return header.toLowerCase()==="content-type"});if(!hasContentType&&this.contentType){args.headers["Content-Type"]=this.contentType}if(this.handleAs==="arraybuffer"||this.handleAs==="blob"||this.handleAs==="document"){args.responseType=this.handleAs}args.withCredentials=this.withCredentials;args.callback=this.receive.bind(this);args.url=this.url;args.method=this.method;this.response=this.error=null;this.activeRequest=args.url&&this.xhr.request(args);return this.activeRequest}});</script></polymer-element></div>
<div hidden><polymer-element name="playpause-svg" attributes="stroke strokeWidth fill" assetpath="../src/playpause-svg/"><template><style>:host{position:absolute;text-align:center;top:0;bottom:0;right:0;left:0;margin:auto;overflow:hidden;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap;-webkit-align-items:center;align-items:center}svg{display:inline-block;vertical-align:middle;width:inherit}.playpause-container{width:100%;-webkit-transition:-webkit-perspective .2s ease;-moz-transition:-moz-perspective .2s ease;transition:perspective .2s ease;-webkit-perspective:600px;-moz-perspective:600px;-ms-perspective:600px;perspective:600px;-webkit-perspective-origin:50% 40%;-moz-perspective-origin:50% 40%;-ms-perspective-origin:50% 40%;perspective-origin:50% 40%}.pause-container,.play-container{width:100%;position:absolute;top:0;-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transition:-webkit-transform-origin 400ms cubic-bezier(0.26,.86,.44,.985),-webkit-transform 400ms cubic-bezier(0.26,.86,.44,.985),visibility 400ms cubic-bezier(0.26,.86,.44,.985),opacity 400ms cubic-bezier(0.26,.86,.44,.985);-moz-transition:-webkit-transform-origin 400ms cubic-bezier(0.26,.86,.44,.985),-webkit-transform 400ms cubic-bezier(0.26,.86,.44,.985),visibility 400ms cubic-bezier(0.26,.86,.44,.985),opacity 400ms cubic-bezier(0.26,.86,.44,.985);-ms-transition:-webkit-transform-origin 400ms cubic-bezier(0.26,.86,.44,.985),-webkit-transform 400ms cubic-bezier(0.26,.86,.44,.985),visibility 400ms cubic-bezier(0.26,.86,.44,.985),opacity 400ms cubic-bezier(0.26,.86,.44,.985);-o-transition:-webkit-transform-origin 400ms cubic-bezier(0.26,.86,.44,.985),-webkit-transform 400ms cubic-bezier(0.26,.86,.44,.985),visibility 400ms cubic-bezier(0.26,.86,.44,.985),opacity 400ms cubic-bezier(0.26,.86,.44,.985);transition:-webkit-transform-origin 400ms cubic-bezier(0.26,.86,.44,.985),-webkit-transform 400ms cubic-bezier(0.26,.86,.44,.985),visibility 400ms cubic-bezier(0.26,.86,.44,.985),opacity 400ms cubic-bezier(0.26,.86,.44,.985);-webkit-transition:transform-origin 400ms cubic-bezier(0.26,.86,.44,.985),transform 400ms cubic-bezier(0.26,.86,.44,.985),visibility 400ms cubic-bezier(0.26,.86,.44,.985),opacity 400ms cubic-bezier(0.26,.86,.44,.985);-moz-transition:transform-origin 400ms cubic-bezier(0.26,.86,.44,.985),transform 400ms cubic-bezier(0.26,.86,.44,.985),visibility 400ms cubic-bezier(0.26,.86,.44,.985),opacity 400ms cubic-bezier(0.26,.86,.44,.985);-ms-transition:transform-origin 400ms cubic-bezier(0.26,.86,.44,.985),transform 400ms cubic-bezier(0.26,.86,.44,.985),visibility 400ms cubic-bezier(0.26,.86,.44,.985),opacity 400ms cubic-bezier(0.26,.86,.44,.985);-o-transition:transform-origin 400ms cubic-bezier(0.26,.86,.44,.985),transform 400ms cubic-bezier(0.26,.86,.44,.985),visibility 400ms cubic-bezier(0.26,.86,.44,.985),opacity 400ms cubic-bezier(0.26,.86,.44,.985);transition:transform-origin 400ms cubic-bezier(0.26,.86,.44,.985),transform 400ms cubic-bezier(0.26,.86,.44,.985),visibility 400ms cubic-bezier(0.26,.86,.44,.985),opacity 400ms cubic-bezier(0.26,.86,.44,.985)}.future{-moz-transform:translate3d(0,100%,0) rotateX(-90deg) translate3d(0,100%,0);-o-transform:translate3d(0,100%,0) rotateX(-90deg) translate3d(0,100%,0);-ms-transform:translate3d(0,100%,0) rotateX(-90deg) translate3d(0,100%,0);-webkit-transform:translate3d(0,100%,0) rotateX(-90deg) translate3d(0,100%,0);transform:translate3d(0,100%,0) rotateX(-90deg) translate3d(0,100%,0);opacity:0}.past{-moz-transform:translate3d(0,-100%,0) rotateX(90deg) translate3d(0,-100%,0);-o-transform:translate3d(0,-100%,0) rotateX(90deg) translate3d(0,-100%,0);-ms-transform:translate3d(0,-100%,0) rotateX(90deg) translate3d(0,-100%,0);-webkit-transform:translate3d(0,-100%,0) rotateX(90deg) translate3d(0,-100%,0);transform:translate3d(0,-100%,0) rotateX(90deg) translate3d(0,-100%,0);opacity:0}.dummy{opacity:0}</style><div class="playpause-container"><div class="play-container present" id="play"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve" id="playPauseCtrl"><g><path d="M50.5504,30L9.44958,55.5539L9.44958,4.44605L50.5504,30Z" stroke="{{stroke}}" stroke-width="{{strokeWidth}}" stroke-linecap="round" stroke-linejoin="round" fill="{{fill}}" vector-effect="non-scaling-stroke"/></g></svg></div><div class="pause-container future" id="pause"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve" id="playPauseCtrl"><g><g><rect x="6.67827" y="6.375" width="20.3217" height="47.25" stroke="{{stroke}}" stroke-width="{{strokeWidth}}" stroke-linecap="round" stroke-linejoin="round" fill="{{fill}}" vector-effect="non-scaling-stroke"/></g><g><rect x="33" y="6.375" width="20.3217" height="47.25" stroke="{{stroke}}" stroke-width="{{strokeWidth}}" stroke-linecap="round" stroke-linejoin="round" fill="{{fill}}" vector-effect="non-scaling-stroke"/></g></g></svg></div><div class="dummy"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve" id="playPauseCtrl"><g><g><rect x="6.67827" y="6.375" width="20.3217" height="47.25" stroke="{{stroke}}" stroke-width="{{strokeWidth}}" stroke-linecap="round" stroke-linejoin="round" fill="{{fill}}" vector-effect="non-scaling-stroke"/></g><g><rect x="33" y="6.375" width="20.3217" height="47.25" stroke="{{stroke}}" stroke-width="{{strokeWidth}}" stroke-linecap="round" stroke-linejoin="round" fill="{{fill}}" vector-effect="non-scaling-stroke"/></g></g></svg></div></div><toggle-play></toggle-play></template><script>Polymer("playpause-svg",{created:function(){this.stroke="#555";this.strokeWidth=3;this.fill="transparent"},ready:function(){this.addEventListener("togglePlay",this.togglePlay)},togglePlay:function(e){if(e.detail.state==="play"){this.playAnim()}else{this.pauseAnim()}},pauseAnim:function(){this.$.play.classList.remove("present");this.$.play.classList.add("past");this.$.pause.classList.remove("future");this.$.pause.classList.add("present")},playAnim:function(){this.$.play.classList.remove("past");this.$.play.classList.add("present");this.$.pause.classList.remove("present");this.$.pause.classList.add("future")}});</script></polymer-element></div>
<polymer-element name="gfy-cat" attributes="src gfyName width color fill strokeWidth ntimes loop" assetpath="../src/gfy-cat/"><template><link rel="stylesheet" href="../src/gfy-cat/gfy-cat.css"><template if="{{src}}"><core-ajax url="http://upload.gfycat.com/transcode?fetchUrl={{src | cleanSrcUrl}}" id="gfyAjax" handleas="json"></core-ajax></template><div id="gfyContainer" _style="width:{{ width }};" on-mouseup="{{toggleState}}" on-mouseover="{{hoverHandle}}" on-mouseout="{{hoverOutHandle}}"><video autoplay width="100%" id="vid" src="//zippy.gfycat.com/{{gfyName}}{{ext}}"></video><video hidden width="100%" id="vidReverse" src="//zippy.gfycat.com/{{gfyName}}-reverse{{ext}}"></video><div class="clearfix"></div><playpause-svg stroke="{{color}}" class="{{visibility}}" strokewidth="{{fill ? 0:strokeWidth}}" fill="{{fill ? color:'transparent'}}" id="playPauseSvg"></playpause-svg><div class="gfyCtrl {{visibility}}" id="gfyCtrlBox" style="-webkit-flex-flow: column nowrap; flex-flow:column nowrap; -webkit-justify-content:space-around; justify-content:space-around;"><div class="speedCtrl"><div class="bttn" id="up" on-mouseup="{{increaseSpeed}}" title="accelerate playback"><svg version="1.1" id="speedUp" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve" preserveaspectratio="meet" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-miterlimit:1.41421;"><g><g><path fill="{{fill ? color:'transparent'}}" d="M54.368,30L26.3873,49.5821L26.3873,10.4179L54.368,30Z" stroke-width="{{fill ? 0:strokeWidth}}" stroke="{{color}}" vector-effect="non-scaling-stroke"/></g><g><path fill="{{fill ? color:'transparent'}}" d="M23.866,30L5.63198,42.7609L5.63198,17.2391L23.866,30Z" stroke-width="{{fill ? 0:strokeWidth}}" stroke="{{color}}" vector-effect="non-scaling-stroke"/></g></g></svg></div><div id="speed" _style="color:{{color}}">{{speed}}x</div><div class="bttn" id="down" on-mouseup="{{decreaseSpeed}}" title="slow playback"><svg version="1.1" id="speedDown" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve" preserveaspectratio="meet" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-miterlimit:1.41421;"><g><g><path fill="{{fill ? color:'transparent'}}" d="M5.63198,30L33.6127,10.4179L33.6127,49.5821L5.63198,30Z" stroke-width="{{fill ? 0:strokeWidth}}" stroke="{{color}}" vector-effect="non-scaling-stroke"/></g><g><path fill="{{fill ? color:'transparent'}}" d="M36.134,29.5376L54.368,16.7767L54.368,42.2985L36.134,29.5376Z" stroke-width="{{fill ? 0:strokeWidth}}" stroke="{{color}}" vector-effect="non-scaling-stroke"/></g></g></svg></div></div><div id="pingpong"><div class="bttn" on-mouseup="{{togglePingPong}}" title="pingpong playback"><svg version="1.1" id="speedDown" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-miterlimit:1.41421;"><g><g><path fill="{{fill ? color:'transparent'}}" d="M45.4798,30L6.04689,53.8893L6.04689,6.11072Z" stroke-width="{{fill ? 0:strokeWidth}}" stroke="{{color}}" vector-effect="non-scaling-stroke"/></g><g><path fill="{{fill ? color:'transparent'}}" d="M14.5202,30L53.9531,6.11072L53.9531,53.8893Z" stroke-width="{{fill ? 0:strokeWidth}}" stroke="{{color}}" vector-effect="non-scaling-stroke"/></g></g></svg></div></div><div id="reverse"><div class="bttn" on-mouseup="{{reversePlayback}}" title="reverse playback"><svg version="1.1" id="speedDown" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-miterlimit:1.41421;"><g><g><path fill="{{fill ? color:'transparent'}}" d="M9.44958,30L50.5504,4.44605L50.5504,55.5539L9.44958,30Z" stroke-width="{{fill ? 0:strokeWidth}}" stroke="{{color}}" vector-effect="non-scaling-stroke"/></g></g></svg></div></div></div><content></content></div></template><script>Polymer("gfy-cat",{created:function(){this.gfyName="";this.width="100%";this.speed=1;this.color="#eee";this.visibility="hidden";this.fill=false;this.strokeWidth=3;this.playMode="forward";this.pingPongActive=false;this.src="";this.getExt();this.state="play";this.playCount=0;this.ntimes=3},ready:function(){console.log(this.loop);if(this.loop!==undefined){this.addLoopAttr()}this.$.vid.addEventListener("ended",function(){this.nextAction()}.bind(this));this.$.vidReverse.addEventListener("ended",function(){this.nextAction()}.bind(this));if(this.src&&!this.src.match(/(\.gifv|\.webm|\.mp4)$/)){this.$.gfyAjax.addEventListener("core-response",function(e){this.gfyName=e.detail.response.gfyName}.bind(this));this.$.gfyAjax.go()}},addLoopAttr:function(){this.$.vid.setAttribute("loop","true");this.$.vidReverse.setAttribute("loop","true");this.ntimes=100},nextAction:function(){this.incrementPlayCount();if(this.pingPongActive&&this.state==="play"){this.reversePlayback()}else if(this.state==="play"){this.rePlay()}},incrementPlayCount:function(){this.playCount++;console.log("playCount="+this.playCount,"endCount="+this.ntimes);var userIntervention=this.interrupt;if(this.playCount===this.ntimes||userIntervention){this.pauseVid();if(userIntervention){this.playVid(true)}}},resetPlayCount:function(){this.playCount=0},clearInterrupt:function(){this.interrupt=false},pingPongActiveChanged:function(){this.toggleNTimes();console.log("ntimes changed, now:"+this.ntimes)},toggleNTimes:function(){if(this.pingPongActive){this.ntimes*=2}else{this.ntimes/=2}},getExt:function(){var testVid=document.createElement("video");switch(true){case testVid.canPlayType("video/mp4")!="":this.ext=".mp4";break;case testVid.canPlayType("video/webm")!="":this.ext=".webm";break}},cleanSrcUrl:function(url){return url.replace(/http:\/\//,"")},showCtrls:function(e,d,s){this.visibility="shown";if(this.hideTimeOut){clearTimeout(this.hideTimeOut)}this.hideTimeOut=setTimeout(this.hideCtrls.bind(this),3e3)},hideCtrls:function(){this.visibility="hidden";this.hideTimeOut=undefined},hoverHandle:function(e,d,s){if(!this.isMobile()){if(!this.hideTimeOut){this.showCtrls()}clearTimeout(this.hideTimeOut)}},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},hoverOutHandle:function(){if(this.hideTimeOut){clearTimeout(this.hideTimeOut)}this.hideTimeOut=setTimeout(this.hideCtrls.bind(this),400)},mobileCtrlReset:function(){if(this.isMobile()){this.showCtrls()}},autoResume:function(reset){if(this.state==="pause"){this.playVid(reset)}else{this.interrupt=true}},increaseSpeed:function(e,d,s){e.stopPropagation();this.mobileCtrlReset();if(this.speed<1){this.speed*=2}else{this.speed+=.5}this.$.vid.playbackRate=this.speed;this.$.vidReverse.playbackRate=this.speed;this.autoResume(false)},decreaseSpeed:function(e,d,s){e.stopPropagation();this.mobileCtrlReset();if(this.speed<1){this.speed/=2}else{this.speed-=.5}this.$.vid.playbackRate=this.speed;this.$.vidReverse.playbackRate=this.speed;this.autoResume(false)},reversePlayback:function(e,d,s){if(this.playMode==="reverse"){this.playMode="forward";console.log("play forward")}else{this.playMode="reverse";console.log("play backward")}if(e){e.stopPropagation();this.mobileCtrlReset();this.updateReverseUI();if(this.pingPongActive){this.deactivatePingPong();this.playMode="reverse";this.updateReverseUI()}}},updateReverseUI:function(forceState){if(this.playMode==="forward"||forceState===false){this.$.reverse.classList.remove("active")}else{this.$.reverse.classList.add("active")}},rePlay:function(){this.playVid()},togglePingPong:function(e,d,s){e.stopPropagation();this.mobileCtrlReset();if(this.pingPongActive){this.deactivatePingPong();if(this.playMode!=="forward")this.playMode="forward"}else{this.activatePingPong()}},activatePingPong:function(){this.pingPongActive=true;this.$.pingpong.classList.add("active");this.autoResume(true);this.updateReverseUI(false);this.removeLoop()},deactivatePingPong:function(){this.pingPongActive=false;this.$.pingpong.classList.remove("active");this.autoResume(true)},removeLoop:function(){this.$.vid.removeAttribute("loop");this.$.vidReverse.removeAttribute("loop")},playModeChanged:function(){var reset=!this.pingPongActive;this.playVid(reset)},playVid:function(reset){if(reset){this.clearInterrupt();this.resetPlayCount();this.rewind()}if(this.playMode==="forward"){this.$.vidReverse.pause();this.$.vid.play();this.$.vidReverse.setAttribute("hidden","true");this.$.vid.removeAttribute("hidden")}else{this.$.vid.pause();this.$.vidReverse.play();this.$.vid.setAttribute("hidden","true");this.$.vidReverse.removeAttribute("hidden")}this.state="play"},pauseVid:function(){this.resetPlayCount();if(this.playMode==="forward"){this.$.vid.pause()}else{this.$.vidReverse.pause()}this.state="pause"},rewind:function(){if(this.playMode==="forward"){this.$.vid.currentTime=0}else{this.$.vidReverse.currentTime=0}},stateChanged:function(attrName,oldVal,newVal){this.triggerToggleEvent()},toggleState:function(e,d,s){if(!this.hideTimeOut)this.showCtrls();if(this.state==="play"||this.state===undefined){this.pauseVid()}else if(this.state==="pause"){this.playVid()}},triggerToggleEvent:function(){var that=this;[].forEach.call(this.shadowRoot.querySelectorAll("playpause-svg"),function(el,i){el.fire("togglePlay",{state:that.state})})}});</script></polymer-element>